<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Checkers Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .game-container {
            max-width: 500px;
            width: 100%;
            padding: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            background: #fff;
            border-radius: 8px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 0;
        }

        .cell {
            width: 100%;
            aspect-ratio: 1 / 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .dark-cell {
            background-color: #6c757d;
        }

        .light-cell {
            background-color: #f8f9fa;
        }

        .piece {
            width: 80%;
            aspect-ratio: 1 / 1;
            border-radius: 50%;
            cursor: pointer;
        }

        .player1 {
            background-color: red;
        }

        .player2 {
            background-color: black;
        }

        .selected {
            background-color: yellow !important;
        }

        .info-box {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
        }

        .winner-banner {
            text-align: center;
            margin-top: 10px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .game-container {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>Checkers Game</h1>
        </div>

        <div class="info-box">
            <span id="play-count">Plays: 0</span>
            <span id="player1-count">Player 1 Pieces: 12</span>
            <span id="player2-count">Player 2 Pieces: 12</span>
        </div>

        <div class="board" id="board"></div>

        <div class="winner-banner hidden" id="winner-banner">
            <h2 id="winner-text"></h2>
            <button class="btn btn-primary mt-2" id="restart-btn">Restart Game</button>
        </div>
    </div>

    <script>
        const board = document.getElementById('board');
        const playCountEl = document.getElementById('play-count');
        const player1CountEl = document.getElementById('player1-count');
        const player2CountEl = document.getElementById('player2-count');
        const winnerBanner = document.getElementById('winner-banner');
        const winnerText = document.getElementById('winner-text');
        const restartBtn = document.getElementById('restart-btn');

        let playCount = 0;
        let player1Pieces = 12;
        let player2Pieces = 12;
        let currentPlayer = 1;
        let selectedPiece = null;

        function initializeGame() {
            board.innerHTML = '';
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell', (row + col) % 2 === 0 ? 'light-cell' : 'dark-cell');
                    cell.dataset.row = row;
                    cell.dataset.col = col;

                    if ((row + col) % 2 !== 0) {
                        if (row < 3) {
                            const piece = createPiece(2);
                            cell.appendChild(piece);
                        } else if (row > 4) {
                            const piece = createPiece(1);
                            cell.appendChild(piece);
                        }
                    }

                    cell.addEventListener('click', handleCellClick);
                    board.appendChild(cell);
                }
            }
        }

        function createPiece(player) {
            const piece = document.createElement('div');
            piece.classList.add('piece', player === 1 ? 'player1' : 'player2');
            piece.dataset.player = player;
            return piece;
        }

        function handleCellClick(e) {
            const cell = e.currentTarget;

            if (selectedPiece) {
                const fromRow = parseInt(selectedPiece.parentElement.dataset.row, 10);
                const fromCol = parseInt(selectedPiece.parentElement.dataset.col, 10);
                const toRow = parseInt(cell.dataset.row, 10);
                const toCol = parseInt(cell.dataset.col, 10);

                const rowDiff = toRow - fromRow;
                const colDiff = toCol - fromCol;

                // Check for valid jump move
                if (
                    Math.abs(rowDiff) === 2 &&
                    Math.abs(colDiff) === 2 &&
                    !cell.hasChildNodes()
                ) {
                    const jumpedRow = fromRow + rowDiff / 2;
                    const jumpedCol = fromCol + colDiff / 2;

                    const jumpedCell = board.querySelector(
                        `.cell[data-row="${jumpedRow}"][data-col="${jumpedCol}"]`
                    );

                    if (
                        jumpedCell &&
                        jumpedCell.hasChildNodes() &&
                        jumpedCell.firstChild.dataset.player != currentPlayer
                    ) {
                        // Remove the jumped piece
                        jumpedCell.removeChild(jumpedCell.firstChild);

                        if (currentPlayer === 1) {
                            player2Pieces--;
                            player2CountEl.textContent = `Player 2 Pieces: ${player2Pieces}`;
                        } else {
                            player1Pieces--;
                            player1CountEl.textContent = `Player 1 Pieces: ${player1Pieces}`;
                        }

                        // Move the piece
                        cell.appendChild(selectedPiece);
                        selectedPiece.classList.remove('selected');
                        selectedPiece = null;
                        playCount++;
                        playCountEl.textContent = `Plays: ${playCount}`;
                        currentPlayer = currentPlayer === 1 ? 2 : 1;

                        checkForWinner();
                        return;
                    }
                }

                // Regular move
                if (
                    Math.abs(rowDiff) === 1 &&
                    Math.abs(colDiff) === 1 &&
                    !cell.hasChildNodes()
                ) {
                    cell.appendChild(selectedPiece);
                    selectedPiece.classList.remove('selected');
                    selectedPiece = null;
                    playCount++;
                    playCountEl.textContent = `Plays: ${playCount}`;
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                }
            } else {
                const piece = cell.querySelector('.piece');
                if (piece && parseInt(piece.dataset.player, 10) === currentPlayer) {
                    selectedPiece = piece;
                    selectedPiece.classList.add('selected');
                }
            }
        }

        function checkForWinner() {
            if (player1Pieces === 0) {
                endGame(2);
            } else if (player2Pieces === 0) {
                endGame(1);
            }
        }

        function endGame(winner) {
            winnerText.textContent = `Player ${winner} Wins!`;
            winnerBanner.classList.remove('hidden');
        }

        restartBtn.addEventListener('click', () => {
            playCount = 0;
            player1Pieces = 12;
            player2Pieces = 12;
            currentPlayer = 1;
            playCountEl.textContent = `Plays: 0`;
            player1CountEl.textContent = `Player 1 Pieces: 12`;
            player2CountEl.textContent = `Player 2 Pieces: 12`;
            winnerBanner.classList.add('hidden');
            initializeGame();
        });

        initializeGame();
    </script>
</body>
</html>
